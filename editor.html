<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
<script>
function hideFrame(){
	var fr=document.getElementById("frame");
	fr.style.display="none";
}
	
function getCaret(el) { 
  if (el.selectionStart) { 
    return el.selectionStart; 
  } else if (document.selection) { 
    el.focus(); 

    var r = document.selection.createRange(); 
    if (r == null) { 
      return 0; 
    } 

    var re = el.createTextRange(), 
        rc = re.duplicate(); 
    re.moveToBookmark(r.getBookmark()); 
    rc.setEndPoint('EndToStart', re); 

    return rc.text.length; 
  }  
  return 0; 
}	
	
function 
isNumberKey(evt)
{
    edit_string=edit_box.value
    var character_code = (evt.which) ? evt.which : evt.keyCode
    // alert(character_code)
    var actual_key=String.fromCharCode(character_code)
    // alert(actual_key)
    edit_string = edit_string + actual_key
    // alert(edit_string)
}
	/*	Work on this function */
	/*
function getCursorPosition(event)
	{
		var x=event.clientX
		var y=event.clientY
	}
	*/
function insertText()
	{
	var textarea = document.getElementById('edit_box');
    var currentPos = getCaret(textarea);
    var strLeft = textarea.value.substring(0,currentPos);
	var strMiddle=document.getElementById("frame").contentWindow.document.getElementById("people").textContent;
	var strRight = textarea.value.substring(currentPos,textarea.value.length);
	var strMiddle=strMiddle.trim()
    textarea.value =  strLeft + strMiddle + strRight;
	}
function grabTextBox()
	{
		
var textbox=document.getElementById('edit_box')
		var content=textbox.value
        var textcontent=document.getElementById('textcontent')
		textcontent.innerHTML=content
	}
</script>
</head>
	

<body>
	<h1>Stupidly Simple Editor <br>Proof Of Concept</br></h1>
	<br><br><br><br><br><br>
	<div id="textcontent"></div>
	<textarea id="edit_box" type="text" onkeypress="return isNumberKey(evt)" onkeyup="grabTextBox()" rows="10" cols="30" ></textarea>
	<button onclick="insertText(); grabTextBox();">Insert Text</button>
	<iframe id="frame" style="visibility:hidden" src="/request_data_2.html" />

</body>
</html> 
